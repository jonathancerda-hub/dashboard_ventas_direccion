<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Manual Interactivo - Dashboard de Ventas</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- PREMIUM DESIGN SYSTEM --- */
        :root {
            --primary: #714B67;
            /* Odoo Purple - Brand Core */
            --primary-dark: #56384e;
            --primary-light: #f3eef2;
            --accent: #00d2d3;
            /* Teal for highlighters */
            --text-main: #1e293b;
            --text-secondary: #64748b;
            --bg-body: #f1f5f9;
            --bg-card: #ffffff;
            --border-subtle: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        .manual-container {
            display: flex;
            max-width: 1600px;
            margin: 0 auto;
            min-height: 100vh;
        }

        /* --- MODERN SIDEBAR --- */
        .manual-sidebar {
            width: 300px;
            background: #fff;
            border-right: 1px solid var(--border-subtle);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            z-index: 10;
        }

        .sidebar-header {
            padding: 30px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .sidebar-header .brand {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            opacity: 0.8;
            font-weight: 600;
        }

        .sidebar-header h3 {
            margin: 10px 0 0;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .sidebar-nav {
            padding: 20px 0;
            flex-grow: 1;
        }

        .sidebar-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar-nav .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 30px;
            text-decoration: none;
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
            transition: var(--transition);
            border-left: 4px solid transparent;
        }

        .sidebar-nav .nav-link:hover {
            color: var(--primary);
            background: var(--primary-light);
        }

        .sidebar-nav .nav-link.active {
            color: var(--primary-dark);
            background: #f8f5f7;
            border-left-color: var(--primary);
            font-weight: 600;
        }

        .sidebar-nav ul ul .nav-link {
            padding-left: 50px;
            font-size: 0.9rem;
            padding-top: 8px;
            padding-bottom: 8px;
        }

        /* --- PREMIUM CONTENT AREA --- */
        .manual-content {
            flex-grow: 1;
            padding: 60px 80px;
            max-width: 1200px;
            /* Optimal reading width */
        }

        section {
            margin-bottom: 80px;
            scroll-margin-top: 40px;
            opacity: 0;
            animation: fadeIn 0.8s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 3rem;
            font-weight: 800;
            letter-spacing: -1px;
            color: var(--text-main);
            margin-bottom: 1.5rem;
            line-height: 1.2;
            background: -webkit-linear-gradient(0deg, var(--primary), var(--primary-dark));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-main);
            margin-top: 0;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 10px;
        }

        h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        p {
            font-size: 1.05rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        ul {
            margin-bottom: 1.5rem;
            color: var(--text-secondary);
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* --- CARDS & WIDGETS --- */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .kpi-grid.two-columns {
            grid-template-columns: repeat(2, 1fr);
        }

        .kpi-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-subtle);
            transition: var(--transition);
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .kpi-card h4 {
            margin: 0 0 15px 0;
            font-size: 1.1rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .kpi-card h4 i {
            background: var(--primary-light);
            padding: 8px;
            border-radius: 8px;
            font-size: 1.2rem;
        }

        .kpi-card p {
            margin: 0 0 10px 0;
            font-size: 0.95rem;
            color: var(--text-main);
        }

        .kpi-card .detail {
            font-size: 0.85rem;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-subtle);
            padding-top: 10px;
            margin-top: 10px;
        }

        /* --- BADGES FOR RFM --- */
        .rfm-list {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }

        .rfm-list li {
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge.champion {
            background: #dcfce7;
            color: #166534;
        }

        .badge.loyal {
            background: #ecfccb;
            color: #3f6212;
        }

        .badge.potential {
            background: #e0f2fe;
            color: #0369a1;
        }

        .badge.new {
            background: #f3e8ff;
            color: #6b21a8;
        }

        .badge.at-risk {
            background: #ffedd5;
            color: #9a3412;
        }

        .badge.lost {
            background: #fee2e2;
            color: #991b1b;
        }

        /* --- UTILS --- */
        .code-block,
        .note {
            border-radius: 12px;
            padding: 20px;
            font-size: 0.95rem;
            margin: 25px 0;
        }

        .code-block {
            background: #2d3748;
            color: #edf2f7;
            font-family: 'Fira Code', monospace;
            border-left: none;
        }

        .code-block p {
            color: #cbd5e0;
            margin-bottom: 0.5rem;
        }

        .note {
            background: #fff8eb;
            border: 1px solid #fbd38d;
            color: #744210;
        }

        .note strong {
            color: #975a16;
        }

        /* --- VISUAL EXAMPLES --- */
        .visual-example {
            margin: 30px 0;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-subtle);
            background: white;
        }

        .visual-example img {
            width: 100%;
            height: auto;
            display: block;
            transition: var(--transition);
        }

        .visual-example:hover img {
            transform: scale(1.02);
        }

        .visual-caption {
            padding: 15px 20px;
            background: #f8fafc;
            border-top: 1px solid var(--border-subtle);
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-style: italic;
        }
    </style>
</head>

<body>

    <div class="manual-container">
        <!-- Barra lateral de navegación -->
        <aside class="manual-sidebar">
            <div class="sidebar-header">
                <div class="brand">Dirección Comercial</div>
                <h3>Manual 2.0</h3>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="#introduccion" class="nav-link active">Introducción</a></li>
                    <li><a href="#obtencion-datos" class="nav-link">1. Obtención de Datos</a></li>
                    <li><a href="#filtros-odoo" class="nav-link">2. Filtros en Odoo</a></li>
                    <li>
                        <a href="#logica-app" class="nav-link">3. Lógica en la Aplicación</a>
                        <ul>
                            <li><a href="#logica-inversion" class="nav-link">3.1 Inversión del Saldo</a></li>
                            <li><a href="#logica-exclusion" class="nav-link">3.2 Exclusión Internacional</a></li>
                            <li><a href="#logica-normalizacion" class="nav-link">3.3 Normalización de Líneas</a></li>
                            <li><a href="#logica-limpieza" class="nav-link">3.4 Limpieza de Productos</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#dashboard" class="nav-link">4. Uso del Dashboard</a>
                        <ul>
                            <li><a href="#dashboard-header" class="nav-link">4.1 Cabecera y Filtros</a></li>
                            <li><a href="#dashboard-kpis" class="nav-link">4.2 KPIs Principales</a></li>
                            <li><a href="#dashboard-tablas" class="nav-link">4.3 Tablas de Desglose</a></li>
                            <li><a href="#dashboard-clientes" class="nav-link">4.4 Cobertura y Frecuencia</a></li>
                            <li><a href="#dashboard-rfm" class="nav-link">4.5 Análisis RFM</a></li>
                            <li><a href="#dashboard-riesgo" class="nav-link">4.6 Clientes en Riesgo</a></li>
                            <li><a href="#dashboard-patrones" class="nav-link">4.7 Heatmap de Actividad</a></li>
                            <li><a href="#dashboard-tendencia" class="nav-link">4.8 Tendencia Histórica</a></li>
                            <li><a href="#dashboard-geo" class="nav-link">4.9 Mapa de Penetración</a></li>
                        </ul>
                    </li>
                    <li><a href="#metas" class="nav-link">5. Gestión de Metas</a></li>
                    <li><a href="#dashboard-vendedor" class="nav-link">6. Dashboard por Vendedor</a></li>
                    <li><a href="#vista-ventas" class="nav-link">7. Vista de Líneas de Venta</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Contenido principal del manual -->
        <main class="manual-content">
            <section id="introduccion">
                <h1>Introducción al Dashboard de Ventas</h1>
                <p>Este manual describe el funcionamiento del Dashboard de Ventas, explicando cómo se obtienen, procesan
                    y visualizan los datos desde el sistema Odoo. El objetivo es proporcionar una herramienta clara y
                    precisa para el seguimiento del avance de ventas.</p>
            </section>

            <section id="obtencion-datos">
                <h2>1. Obtención de Datos (desde Odoo)</h2>
                <p>La aplicación se conecta a Odoo para consultar las líneas de asientos contables
                    (<code>account.move.line</code>). Estos datos iniciales se enriquecen con información de otros
                    modelos relacionados para obtener una vista completa de cada transacción.</p>
                <ul>
                    <li><strong>Asientos Contables (<code>account.move</code>):</strong> Fecha, estado, vendedor, etc.
                    </li>
                    <li><strong>Productos (<code>product.product</code>):</strong> Nombre, línea comercial, ciclo de
                        vida, etc.</li>
                    <li><strong>Clientes (<code>res.partner</code>):</strong> Nombre, NIF/RUC.</li>
                    <li><strong>Órdenes de Venta (<code>sale.order</code>):</strong> Origen, observaciones de entrega.
                    </li>
                </ul>
            </section>

            <section id="filtros-odoo">
                <h2>2. Filtros Aplicados en la Consulta a Odoo</h2>
                <p>Para asegurar que solo se procesen datos relevantes, se aplican los siguientes filtros directamente
                    en la consulta a la base de datos de Odoo:</p>
                <div class="code-block">
                    <p><strong>Tipo de Movimiento:</strong> Solo facturas de venta y notas de crédito
                        (<code>out_invoice</code>, <code>out_refund</code>).</p>
                    <p><strong>Estado del Movimiento:</strong> Solo asientos contables ya publicados
                        (<code>state = 'posted'</code>).</p>
                    <p><strong>Código de Producto:</strong> Se excluyen productos que no tienen una referencia interna
                        (<code>default_code != False</code>).</p>
                    <p><strong>Categorías Excluidas:</strong> Se omiten productos de categorías específicas de servicio
                        o internas (IDs: <code>[315, 333, 304, 314, 318, 339]</code>).</p>
                    <p><strong>Impuestos:</strong> Solo se incluyen líneas que tengan aplicados los impuestos "IGV" o
                        "IGV_INC".</p>
                </div>
            </section>

            <section id="logica-app">
                <h2>3. Procesamiento y Lógica de Negocio (en la Aplicación)</h2>
                <p>Una vez que los datos son obtenidos de Odoo, la aplicación Flask aplica una serie de reglas de
                    negocio para prepararlos antes de mostrarlos en el dashboard.</p>

                <div id="logica-inversion" class="subsection">
                    <h3>3.1 Inversión del Saldo (<code>balance</code>)</h3>
                    <p>El campo <code>balance</code> de Odoo se multiplica por -1. Esto es crucial para la correcta
                        interpretación de los datos:</p>
                    <ul>
                        <li>Las <strong>ventas</strong>, que en contabilidad son un saldo negativo, se convierten en
                            <strong>positivas</strong>.
                        </li>
                        <li>Las <strong>notas de crédito</strong>, que son un saldo positivo, se convierten en
                            <strong>negativas</strong>.
                        </li>
                    </ul>
                </div>

                <div id="logica-exclusion" class="subsection">
                    <h3>3.2 Exclusión de Ventas Internacionales</h3>
                    <p>Se descartan todas las líneas de venta que pertenecen a operaciones internacionales para enfocar
                        el análisis en el mercado local. El filtro se aplica si la línea comercial o el canal de venta
                        contienen "VENTA INTERNACIONAL" o "INTERNACIONAL".</p>
                </div>

                <div id="logica-normalizacion" class="subsection">
                    <h3>3.3 Normalización de Líneas Comerciales</h3>
                    <p>Para simplificar el reporte, ciertas líneas comerciales se agrupan automáticamente:</p>
                    <ul>
                        <li>Las ventas de <strong>"GENVET"</strong> y <strong>"MARCA BLANCA"</strong> se reportan bajo
                            la línea unificada <strong>"TERCEROS"</strong>.</li>
                        <li>Las demás líneas (PETMEDICA, AGROVET, etc.) se mantienen igual.</li>
                    </ul>
                </div>

                <div id="logica-limpieza" class="subsection">
                    <h3>3.4 Limpieza de Nombres de Producto</h3>
                    <p>Para mejorar la agrupación en los rankings, los nombres de productos de la línea
                        <strong>ATREVIA</strong> se simplifican eliminando referencias al tamaño o presentación (ej.
                        "MEDIUM", "SPOT ON"), permitiendo analizar la marca base de forma consolidada.
                    </p>
                </div>
            </section>

            <section id="dashboard">
                <h2>4. Uso del Dashboard Principal</h2>
                <p>El dashboard ha sido rediseñado para ofrecer una visión 360° del negocio, combinando seguimiento de
                    metas con análisis avanzado de clientes (CRM).</p>

                <div id="dashboard-header" class="subsection">
                    <h3>4.1 Cabecera y Filtros</h3>
                    <ul>
                        <li><strong>Selector de Mes:</strong> Permite navegar por el historial de ventas.</li>
                        <li><strong>Filtro de Día (Calendario):</strong> Al hacer clic en el calendario central (día
                            actual), puedes simular el cierre a una fecha anterior (ej. ver cómo iba la venta al día
                            15).</li>
                    </ul>
                </div>

                <div id="dashboard-kpis" class="subsection">
                    <h3>4.2 KPIs Principales (Definiciones Técnicas)</h3>
                    <p>A continuación se detalla la lógica exacta de cálculo para cada indicador, garantizando
                        transparencia en la medición:</p>

                    <div class="visual-example">
                        <img src="C:/Users/jcerda/.gemini/antigravity/brain/54a43a80-3da1-46d6-9924-28c2638a31b4/kpi_dashboard_preview_1766174982466.png"
                            alt="Vista previa de KPIs">
                        <div class="visual-caption">Ejemplo visual de la sección de KPIs con indicadores de avance y
                            metas.</div>
                    </div>

                    <div class="kpi-grid">
                        <ul>
                            <li><strong>Meta vs Venta Total:</strong> Cumplimiento global en dinero y porcentaje.</li>
                            <li><strong>Meta vs Venta IPN:</strong> Desempeño específico en Índice de Productos Nuevos.
                            </li>
                            <li><strong>Vencimiento &lt; 6 Meses:</strong> Valor monetario de productos con fecha de
                                caducidad próxima (ruta de venta específica).</li>
                        </ul>
                    </div>
                </div>

                <div id="dashboard-tablas" class="subsection">
                    <h3>4.3 Tablas de Desglose</h3>
                    <p>Se presentan dos tablas comparativas lado a lado:</p>
                    <ul>
                        <li><strong>Ventas por Línea Comercial:</strong> Ranking de facturación por línea y su peso (%)
                            sobre el total de la empresa.</li>
                        <li><strong>Análisis de Clientes por Línea:</strong> Muestra cuántos clientes únicos han
                            comprado en cada línea y el ticket promedio, permitiendo identificar líneas con alta
                            penetración pero bajo ticket (o viceversa).</li>
                    </ul>
                </div>

                <div id="dashboard-clientes" class="subsection">
                    <h3>4.4 Métricas de Salud de Cartera</h3>

                    <div class="visual-example">
                        <img src="C:/Users/jcerda/.gemini/antigravity/brain/54a43a80-3da1-46d6-9924-28c2638a31b4/coverage_gauge_preview_1766174996371.png"
                            alt="Vista previa de Cobertura">
                        <div class="visual-caption">Módulo de cobertura con velocímetro y tabla de desglose por canal.
                        </div>
                    </div>

                    <div class="kpi-grid two-columns">
                        <p>Nuevos módulos para medir la salud de la cartera:</p>
                        <ul>
                            <li><strong>Cobertura de Clientes:</strong> Un gráfico de velocímetro indica qué porcentaje
                                de
                                nuestra cartera total activa (del año) ha comprado en el mes actual. Se acompaña de una
                                tabla detallada por canal de venta.</li>
                            <li><strong>Frecuencia de Compra:</strong> Mide cuántas veces al mes compra un cliente
                                promedio
                                en cada línea comercial. Ayuda a detectar si los clientes solo compran una vez
                                (reposición)
                                o tienen una recurrencia saludable.</li>
                        </ul>
                    </div>
                </div>

                <div id="dashboard-rfm" class="subsection">
                    <h3>4.5 Modelo RFM (Segmentación Inteligente)</h3>
                    <p>El sistema utiliza un algoritmo avanzado para clasificar a cada cliente en uno de los 7 segmentos
                        disponibles, calculado en tiempo real:</p>

                    <div class="visual-example">
                        <img src="C:/Users/jcerda/.gemini/antigravity/brain/54a43a80-3da1-46d6-9924-28c2638a31b4/rfm_segments_preview_1766175013362.png"
                            alt="Vista previa RFM">
                        <div class="visual-caption">Análisis de segmentos de clientes basado en Recencia, Frecuencia y
                            Valor Monetario.</div>
                    </div>

                    <ul class="rfm-list">
                        <li><strong>Campeones / Leales:</strong> Clientes de alto valor y compra frecuente.</li>
                        <li><strong>Nuevos / Potenciales:</strong> Clientes recientes con oportunidad de crecimiento.
                        </li>
                        <li><strong>En Riesgo / Perdidos:</strong> Clientes que solían comprar y han dejado de hacerlo.
                        </li>
                    </ul>
                    <p class="note">Esta sección incluye una lista de los <strong>Top 20 Clientes</strong> con su
                        asignación de segmento.</p>
                </div>

                <div id="dashboard-riesgo" class="subsection">
                    <h3>4.6 Alerta: Clientes en Riesgo</h3>
                    <p>Una tabla crítica que lista específicamente a los <strong>clientes de Alto Valor</strong> que no
                        han realizado compras en los últimos 60-90 días. Es la herramienta principal para la acción
                        comercial inmediata de retención.</p>
                </div>

                <div id="dashboard-patrones" class="subsection">
                    <h3>4.7 Heatmap de Actividad</h3>
                    <p>Un mapa de calor visualiza la intensidad de las ventas por <strong>Día de la Semana</strong> y
                        <strong>Semana del Mes</strong>. Los colores más oscuros indican los momentos de mayor
                        facturación, útil para planificar recursos o promociones en días "fríos".
                    </p>

                    <div class="visual-example">
                        <img src="C:/Users/jcerda/.gemini/antigravity/brain/54a43a80-3da1-46d6-9924-28c2638a31b4/sales_heatmap_preview_1766175031008.png"
                            alt="Vista previa Heatmap">
                        <div class="visual-caption">Mapa de calor que permite identificar los picos de actividad
                            comercial durante el mes.</div>
                    </div>
                </div>

                <div id="dashboard-tendencia" class="subsection">
                    <h3>4.8 Tendencia Histórica</h3>
                    <p>Gráfico de línea que muestra la evolución de ventas vs metas de los últimos 12 meses, permitiendo
                        visualizar estacionalidad y consistencia en el cumplimiento.</p>
                </div>

                <div id="dashboard-geo" class="subsection">
                    <h3>4.9 Mapa Geográfico de Penetración</h3>
                    <p>Este análisis visualiza las ventas en un mapa interactivo del país, coloreando cada región (departamento/provincia) según el volumen de facturación o la cantidad de clientes. Su objetivo es identificar rápidamente las zonas de alta concentración de negocio y, más importante aún, las "zonas blancas" o mercados con baja penetración que representan oportunidades de crecimiento. [1]</p>

                    <div class="kpi-grid two-columns">
                        <div class="kpi-card">
                            <h4><i class="bi bi-geo-alt-fill"></i>Zonas de Alta Concentración</h4>
                            <p>Identifica las regiones que son el motor de ingresos de la compañía. Permite enfocar esfuerzos de fidelización y asegurar el stock en esas áreas.</p>
                        </div>
                        <div class="kpi-card">
                            <h4><i class="bi bi-pin-map-fill"></i>Oportunidades de Expansión</h4>
                            <p>Revela mercados geográficos con poca o ninguna venta. Son el principal insumo para planificar la expansión territorial y asignar nuevos recursos comerciales.</p>
                        </div>
                    </div>
                    
                    <div class="note">
                        <p><strong>Acciones Estratégicas:</strong></p>
                        <ul>
                            <li><strong>Expansión:</strong> Iniciar estudios de mercado en las 3 principales "zonas blancas" para evaluar su potencial.</li>
                            <li><strong>Optimización:</strong> Rediseñar las rutas comerciales de los vendedores para cubrir de manera más eficiente las zonas de mayor oportunidad.</li>
                            <li><strong>Marketing Localizado:</strong> Lanzar campañas de marketing digital geolocalizadas en zonas de bajo rendimiento para medir el impacto. [2]</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="metas">
                <h2>5. Gestión de Metas</h2>
                <p>La aplicación centraliza toda la gestión de metas y equipos en una <strong>única hoja de cálculo de
                        Google Sheets</strong>, la cual se administra a través de dos interfaces en la aplicación web.
                    Esto permite una gestión de datos centralizada y colaborativa.</p>
                <h3>Metas por Línea</h3>
                <p>Esta sección te permite establecer los objetivos de venta <strong>generales</strong> para cada línea
                    comercial para un mes específico. Estos valores son los que se usan en el dashboard principal para
                    calcular los porcentajes de avance globales. Los datos se guardan en la pestaña
                    <code>MetasPorLinea</code> de tu Google Sheet.
                </p>

                <h3>Metas Vendedor (Gestión de Metas y Equipos)</h3>
                <p>Esta es la sección principal para la gestión detallada. Aquí puedes organizar a tus vendedores en
                    equipos y asignarles metas individuales para cada mes del año en una vista de tabla dinámica. Los
                    datos se guardan en las pestañas <code>Equipos</code> y <code>Metas</code> de tu Google Sheet, donde
                    cada vendedor asignado a un equipo tiene su propia fila para mayor claridad.</p>
                <ul>
                    <li><strong>Asignar Vendedores:</strong> Usa el selector "Asignar Vendedores" para añadir o quitar
                        miembros de un equipo. Luego, presiona el botón <strong>"Actualizar Miembros"</strong>. Esta
                        acción guarda la nueva lista de integrantes en Google Sheets y recarga la página para que puedas
                        ver las filas de los nuevos vendedores y asignarles sus metas.</li>
                    <li><strong>Ingresar Metas:</strong> En la tabla, puedes ingresar la "Meta" total y la meta "IPN"
                        para cada vendedor en la celda correspondiente a cada mes. Los campos numéricos aceptan
                        separadores de miles para facilitar la lectura.</li>
                    <li><strong>Guardar Cambios:</strong> Una vez que hayas ingresado todas las metas, presiona el botón
                        <strong>"Guardar Todas las Metas y Equipos"</strong> al final de la página para almacenar todos
                        los cambios en Google Sheets.
                    </li>
                </ul>
                <p class="note"><strong>Importante:</strong> Toda la información de metas y equipos ahora reside en tu
                    Google Sheet, eliminando la necesidad de archivos <code>.json</code> locales para esta tarea.</p>
            </section>

            <section id="dashboard-vendedor">
                <h2>6. Dashboard por Vendedor</h2>
                <p>Al hacer clic en una línea comercial en la tabla del dashboard principal, se accede a una vista
                    detallada centrada en el rendimiento de los vendedores para esa línea específica.</p>
                <ul>
                    <li><strong>Filtros Dinámicos:</strong> Puedes cambiar de mes y de línea comercial directamente
                        desde esta vista.</li>
                    <li><strong>Tabla de Avance por Vendedor:</strong> Muestra un desglose del rendimiento de cada
                        vendedor, incluyendo su meta, venta, avance IPN y la columna de "Vencimiento < 6 Meses".</li>
                    <li><strong>Gráficos Comparativos:</strong> Incluye un gráfico de barras "Meta vs. Venta por
                        Vendedor" para un análisis visual rápido del cumplimiento de objetivos.</li>
                </ul>
            </section>

            <section id="vista-ventas">
                <h2>7. Vista de Líneas de Venta</h2>
                <p>La página de "Ventas" ha sido optimizada para ser más rápida y fácil de usar.</p>
                <ul>
                    <li><strong>Carga Rápida:</strong> La página ya no carga datos al entrar. La tabla aparecerá vacía
                        inicialmente, garantizando una carga instantánea.</li>
                    <li><strong>Búsqueda a Demanda:</strong> Los datos se obtienen únicamente cuando presionas el botón
                        <strong>"Buscar"</strong>.
                    </li>
                    <li><strong>Búsqueda sin Filtros:</strong> Si haces clic en "Buscar" sin especificar un rango de
                        fechas, la tabla mostrará automáticamente los datos de los últimos 30 días.</li>
                    <li><strong>Filtros Simplificados:</strong> Se ha eliminado el filtro por cliente para simplificar
                        la interfaz y centrarse en los filtros más importantes (fechas y línea comercial).</li>
                </ul>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('section, .subsection');
            const navLinks = document.querySelectorAll('.nav-link');

            // --- SMOOTH SCROLL ---
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const targetId = link.getAttribute('href');
                    if (targetId.startsWith('#')) {
                        e.preventDefault();
                        const targetEl = document.querySelector(targetId);
                        if (targetEl) {
                            window.scrollTo({
                                top: targetEl.offsetTop - 20,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });

            // --- ACTIVE STATE ON SCROLL ---
            const observerOptions = {
                root: null,
                rootMargin: '-10% 0px -80% 0px',
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        if (id) {
                            navLinks.forEach(link => {
                                link.classList.remove('active');
                                if (link.getAttribute('href') === `#${id}`) {
                                    link.classList.add('active');
                                    // Ensure sub-menus stay open or similar if needed
                                }
                            });
                        }
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                if (section.id) observer.observe(section);
            });
        });
    </script>
</body>

</html>